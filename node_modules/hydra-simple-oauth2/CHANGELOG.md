# Changelog

## 4.2.0

### Improvements
- [#354](https://github.com/lelylan/simple-oauth2/pull/354) Add support for custom http options to access token refresh and revoke operations

### Maintainance
- [#329](https://github.com/lelylan/simple-oauth2/pull/329) Documentation updates for persistent access token refresh
- [#330](https://github.com/lelylan/simple-oauth2/pull/330) Upgrade module to use eslint v7
- [#331](https://github.com/lelylan/simple-oauth2/pull/331) Internal module reorganization
- [#333](https://github.com/lelylan/simple-oauth2/pull/333) Add template for issues
- [#341](https://github.com/lelylan/simple-oauth2/pull/341) Segregate integration tests by responsability area
- [#352](https://github.com/lelylan/simple-oauth2/pull/352) Use Node 14 as default runtime version for development. Document support matrix
- [#353](https://github.com/lelylan/simple-oauth2/pull/353) Use [joi](https://www.npmjs.com/package/joi) instead of the deprecated [@hapi/joi](https://www.npmjs.com/package/@hapi/joi) module

## 4.1.0
### Improvements
- [#328](https://github.com/lelylan/simple-oauth2/pull/328) Add support to refresh persistent access tokens

### Maintainance
- [#326](https://github.com/lelylan/simple-oauth2/pull/326) Remove usage of [date-fns](https://date-fns.org/) production dependency
- [#325](https://github.com/lelylan/simple-oauth2/pull/325) Setup [volta](https://volta.sh/) instead of nvm to handle node versions
- [#322](https://github.com/lelylan/simple-oauth2/pull/322) Update acorn version in package-lock file

## 4.0.0
### Breaking changes
* [#292](https://github.com/lelylan/simple-oauth2/pull/292) [#313](https://github.com/lelylan/simple-oauth2/pull/313) Require at least Node 12
* [#292](https://github.com/lelylan/simple-oauth2/pull/292) Use private class fields for non-public API's
* [#292](https://github.com/lelylan/simple-oauth2/pull/292) Access token `.token` property is now frozen
* [#318](https://github.com/lelylan/simple-oauth2/pull/318) New public API separating each grant type into it's own submodule
* [#321](https://github.com/lelylan/simple-oauth2/pull/321) Rename resource owner credentials module to be accurate

### Maintainance
* [#292](https://github.com/lelylan/simple-oauth2/pull/292) Upgrade @hapi/hoek to v9 (requires Node 12)
* [#292](https://github.com/lelylan/simple-oauth2/pull/292) Upgrade @hapi/joi to v17 (requires Node 12)
* [#292](https://github.com/lelylan/simple-oauth2/pull/292) Upgrade @hapi/wreck to v17 (requires Node 12)
* [#311](https://github.com/lelylan/simple-oauth2/pull/311) Upgrade nock dev library to v12
* [#319](https://github.com/lelylan/simple-oauth2/pull/319) Add Node 14 to test matrix

### Documentation
* [#314](https://github.com/lelylan/simple-oauth2/pull/314) Add client credentials token refresh disclaimer
* [#317](https://github.com/lelylan/simple-oauth2/pull/317) Fix output documentation for boom errors
* [#320](https://github.com/lelylan/simple-oauth2/pull/320) Add complete reference documentation

## 3.4.0
### Improvements
* [#301](https://github.com/lelylan/simple-oauth2/pull/301) Refactor module schema to reuse constants across the codebase
* [#302](https://github.com/lelylan/simple-oauth2/pull/302) Extract access token parsing functionality from token class
* [#310](https://github.com/lelylan/simple-oauth2/pull/310) [#312](https://github.com/lelylan/simple-oauth2/pull/312) Change how date-fns is imported do make it compatible with webpack

### Maintainance
* [#303](https://github.com/lelylan/simple-oauth2/pull/303) [#304](https://github.com/lelylan/simple-oauth2/pull/304) Add more references to API documentation on library README
* [#306](https://github.com/lelylan/simple-oauth2/pull/306) Add documentation for URL resolution on host/paths configurations
* [#307](https://github.com/lelylan/simple-oauth2/pull/307) Replace travis CI with github actions

## 3.3.0
* [#299](https://github.com/lelylan/simple-oauth2/pull/299) Add support to verify for token expiration with a custom expiration window
* [#300](https://github.com/lelylan/simple-oauth2/pull/300) Add support to set the header credentials' encoding mode with `options.credentialsEncodingMode`.

## 3.2.0
### New features
* [#298](https://github.com/lelylan/simple-oauth2/pull/298) Add support for custom scope separator by using `options.scopeSeparator` configuration

### Improvements
* [#290](https://github.com/lelylan/simple-oauth2/pull/290) Valid token presence is verified on access token creation
* [#290](https://github.com/lelylan/simple-oauth2/pull/290) Valid tokenType presence is verified on `.revoke` calls

### Maintainance
* [#289](https://github.com/lelylan/simple-oauth2/pull/289) Remove dev lodash library from tests
* [#285](https://github.com/lelylan/simple-oauth2/pull/285) Update ava test runner to v3
* [#287](https://github.com/lelylan/simple-oauth2/pull/287) Update chance-access-token dev library to v2
* [#288](https://github.com/lelylan/simple-oauth2/pull/288) Update nyc instrumentation dev library to v15
* [#297](https://github.com/lelylan/simple-oauth2/pull/297) Add tests for empty credentials support
* [#291](https://github.com/lelylan/simple-oauth2/pull/291) Improve library documentation. Separate API reference from main documentation

## 3.1.0
### New features
* [#277](https://github.com/lelylan/simple-oauth2/pull/277) Add support to parse access tokens's expire_at property as UNIX timestamps

## 3.0.1
### Publishing changes
* [#273](https://github.com/lelylan/simple-oauth2/pull/273) Deprecate unsupported library versions

## 3.0.0
### Breaking changes
* [#260](https://github.com/lelylan/simple-oauth2/pull/260) Use @hapi/wreck v15. This version changes how a **baseUrl** is resolved against a **path**, affecting how `auth.tokenHost`, `auth.tokenPath`, `auth.authorizeHost` and `auth.authorizePath` are resolved when using the `.getToken` methods. See [@hapi/wreck](https://github.com/hapijs/wreck/issues/244) breaking changes to better understand potential issues that may arise.

* [#260](https://github.com/lelylan/simple-oauth2/pull/260) Use new [Node.js WHATWG URL](https://nodejs.org/dist/latest-v12.x/docs/api/url.html#url_constructor_new_url_input_base) api instead of the legacy url module. This change affects how `auth.authorizeHost` and `auth.authorizePath` are resolved when using the `authorizationCode.authorizeURL` method.

* [#256](https://github.com/lelylan/simple-oauth2/pull/256) Users can override the `grant_type` parameter when performing a token exchange throught the `.getToken` method. Useful in cases where the auth server uses a value different from the standard.

* [#256](https://github.com/lelylan/simple-oauth2/pull/256) Token exchange methods no longer mutate provided arguments
* [#255](https://github.com/lelylan/simple-oauth2/pull/255) Follow up to 20 redirects by default
* [#200](https://github.com/lelylan/simple-oauth2/pull/200) [#256](https://github.com/lelylan/simple-oauth2/pull/256) Change default multiple scope encoding from using comma to spaces on all token exchange methods
* [#88](https://github.com/lelylan/simple-oauth2/pull/88) Change JSON response parsing mode from `smart` to `strict`. Since the OAuth2 specification indicates only JSON responses are valid, any non-JSON response throws an error instead of resolving into a Buffer. Use `http.json = true` to restore the previous behavior.

### New features

* [#270](https://github.com/lelylan/simple-oauth2/pull/270) All token exchange methods now accept an optional argument to override non-essential [http options](https://github.com/hapijs/wreck/blob/master/API.md#requestmethod-uri-options) or [read parsing options](https://github.com/hapijs/wreck/blob/master/API.md#readresponse-options).

* [#268](https://github.com/lelylan/simple-oauth2/pull/268) All token exchange methods can be called without arguments
* [#263](https://github.com/lelylan/simple-oauth2/pull/263) Use @hapi/joi v16. No breaking changes are expected.

## 2.5.2

### Publishing changes

* [#262](https://github.com/lelylan/simple-oauth2/pull/262) Use files package option instead of .npmignore

### Documentation improvements

* [#267](https://github.com/lelylan/simple-oauth2/pull/267) Better document encoding of values for the token exchange process

## 2.5.1
### New examples

 * [#249](https://github.com/lelylan/simple-oauth2/pull/249) Add dropbox usage example

### Development dependencies upgradess

 * [#254](https://github.com/lelylan/simple-oauth2/pull/254) Upgrade codebase to eslint v6 and airbnb-base-eslint configuration v14
 * [#253](https://github.com/lelylan/simple-oauth2/pull/253) Upgrade nock to v11
 * [#252](https://github.com/lelylan/simple-oauth2/pull/252) Use ava instead of mocha as test runner
 * [#252](https://github.com/lelylan/simple-oauth2/pull/252) Use ava built-in assertions library instead of chai

## 2.5.0
### Dependencies upgrades

 * [#250](https://github.com/lelylan/simple-oauth2/pull/250) Upgrade date-fns library to v2

## 2.4.0
### Dependencies upgrades

 * [#235](https://github.com/lelylan/simple-oauth2/pull/235) Upgrade Joi version to v15 (@hapi/joi)

### Development dependencies updates

 * [#244](https://github.com/lelylan/simple-oauth2/pull/244) Upgrade mocha test runner to v6
 * [#244](https://github.com/lelylan/simple-oauth2/pull/244) Upgrade nyc to v14
 * [#244](https://github.com/lelylan/simple-oauth2/pull/244) Upgrade development dependencies to latest version available

## 2.3.0
### Dependencies upgrades

 * [#242](https://github.com/lelylan/simple-oauth2/pull/242) Upgrade debug dependency to v4

## 2.2.1

## 1.0.2
- changed joi => @hapi/joi
- changed wreck => @hapi/wreck

## 1.0.1
- move from GitHub to Gab's GitLab (GabLab)
